<div class="container mt-4">
  <mat-card class="p-4">
    <h2 class="mb-4">{{ 'BLOG.CREATE_TITLE' | translate }}</h2>

    <form (ngSubmit)="onSubmit()" [formGroup]="form" enctype="multipart/form-data">

      <!-- Title -->
      <mat-form-field appearance="outline" class="w-100 mb-3">
        <mat-label>{{ 'BLOG.TITLE' | translate }}</mat-label>
        <input matInput formControlName="title" />
        <mat-error *ngIf="isInvalid('title')">
          {{ 'BLOG.VALIDATION.REQUIRED_TITLE' | translate }}
        </mat-error>
      </mat-form-field>

      <!-- Content -->
      <mat-form-field appearance="outline" class="w-100 mb-3">
        <mat-label>{{ 'BLOG.CONTENT' | translate }}</mat-label>
        <textarea matInput rows="5" formControlName="content"></textarea>
        <mat-error *ngIf="isInvalid('content')">
          {{ 'BLOG.VALIDATION.REQUIRED_CONTENT' | translate }}
        </mat-error>
      </mat-form-field>

      <!-- Cover Image -->
      <div class="mb-3">
        <label class="form-label fw-semibold">{{ 'BLOG.COVER_IMAGE' | translate }}</label>
        <input type="file" accept="image/*" (change)="onFileSelected($event)" class="form-control" />
        <div *ngIf="previewImage" class="mt-2">
          <img [src]="previewImage" alt="Preview" style="max-width: 150px; border-radius: 8px;">
        </div>
      </div>

      <!-- Category -->
      <mat-form-field appearance="outline" class="w-100 mb-3">
        <mat-label>{{ 'BLOG.CATEGORY' | translate }}</mat-label>
        <mat-select formControlName="categoryId">
          <mat-option *ngFor="let category of categories" [value]="category.id">
            {{ category.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <!-- Tags -->
      <mat-form-field appearance="outline" class="w-100 mb-3">
        <mat-label>{{ 'BLOG.TAGS' | translate }}</mat-label>
        <mat-select formControlName="tagIds" multiple>
          <mat-option *ngFor="let tag of tags" [value]="tag.id">
            {{ tag.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <!-- Actions -->
      <div class="d-flex gap-2 mt-4">
        <button mat-raised-button color="primary" type="submit" [disabled]="loading">
          <mat-spinner *ngIf="loading" diameter="20" class="me-2"></mat-spinner>
          {{ 'COMMON.SAVE' | translate }}
        </button>
        <button mat-stroked-button color="warn" type="button" routerLink="/blog">
          {{ 'COMMON.CANCEL' | translate }}
        </button>
      </div>
    </form>
  </mat-card>
</div>
